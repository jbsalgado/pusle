# ==========================================
# CONFIGURAÇÃO DO APACHE PARA PRODUÇÃO - ARCH LINUX
# ==========================================
# 
# Este arquivo contém a configuração do VirtualHost para o servidor de produção.
# Configurado especificamente para Arch Linux.
# 
# INSTRUÇÕES DE INSTALAÇÃO NO ARCH LINUX:
# 
# 1. Instale o Apache (se ainda não estiver instalado):
#    sudo pacman -S apache
#
# 2. Copie este conteúdo para: /etc/httpd/conf/extra/httpd-vhosts.conf
#    ou crie um novo arquivo: /etc/httpd/conf.d/pulse.conf
#
# 3. AJUSTE O CAMINHO do DocumentRoot para o caminho real no servidor
#    Exemplo: Se o projeto está em /srv/http/pulse/web, já está configurado
#             Se estiver em outro lugar, altere a linha DocumentRoot
#
# 4. Edite /etc/httpd/conf/httpd.conf e certifique-se de que estas linhas estão descomentadas:
#    LoadModule rewrite_module modules/mod_rewrite.so
#    LoadModule headers_module modules/mod_headers.so
#    Include conf/extra/httpd-vhosts.conf
#    (ou Include conf.d/*.conf se usar conf.d)
#
# 5. Teste a configuração:
#    sudo apachectl configtest
#
# 6. Reinicie o Apache:
#    sudo systemctl restart httpd
#
# 7. Habilite o Apache para iniciar no boot (opcional):
#    sudo systemctl enable httpd
#
# 8. Verifique os logs em caso de erro:
#    sudo tail -f /var/log/httpd/error_log
#    sudo tail -f /var/log/httpd/pulse-error.log
#
# ==========================================

<VirtualHost *:80>
    # Ajuste o ServerName conforme seu domínio
    ServerName seu-dominio.com.br
    ServerAlias www.seu-dominio.com.br
    
    # AJUSTE ESTE CAMINHO: Caminho completo até a pasta web do projeto
    # Exemplo: /var/www/pulse/web ou /home/usuario/pulse/web
    DocumentRoot "/caminho/completo/ate/pulse/web"
    
    # Configuração do diretório web
    <Directory "/caminho/completo/ate/pulse/web">
        # Permite listagem de diretórios (opcional, pode remover se não precisar)
        Options -Indexes +FollowSymLinks
        
        # CRÍTICO: Permite que o .htaccess seja processado
        AllowOverride All
        
        # Permite acesso a todos (ajuste conforme necessário para segurança)
        Require all granted
        
        # Habilita o motor de reescrita
        RewriteEngine on
        
        # Regras de reescrita (backup caso o .htaccess não funcione)
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . index.php [L]
    </Directory>
    
    # Configuração de logs (Arch Linux)
    ErrorLog /var/log/httpd/pulse-error.log
    CustomLog /var/log/httpd/pulse-access.log combined
    
    # Configurações de segurança (opcional mas recomendado)
    <IfModule mod_headers.c>
        # Remove informações do servidor
        Header unset Server
        Header unset X-Powered-By
    </IfModule>
</VirtualHost>

# ==========================================
# CONFIGURAÇÃO PARA HTTPS (SSL) - OPCIONAL
# ==========================================
# 
# Se você tem certificado SSL, descomente e ajuste:
#
# <VirtualHost *:443>
#     ServerName seu-dominio.com.br
#     ServerAlias www.seu-dominio.com.br
#     
#     DocumentRoot "/caminho/completo/ate/pulse/web"
#     
#     SSLEngine on
#     SSLCertificateFile /caminho/para/certificado.crt
#     SSLCertificateKeyFile /caminho/para/chave-privada.key
#     SSLCertificateChainFile /caminho/para/cadeia.crt
#     
#     <Directory "/caminho/completo/ate/pulse/web">
#         Options -Indexes +FollowSymLinks
#         AllowOverride All
#         Require all granted
#         RewriteEngine on
#         RewriteCond %{REQUEST_FILENAME} !-f
#         RewriteCond %{REQUEST_FILENAME} !-d
#         RewriteRule . index.php [L]
#     </Directory>
#     
#     ErrorLog /var/log/httpd/pulse-ssl-error.log
#     CustomLog /var/log/httpd/pulse-ssl-access.log combined
# </VirtualHost>
#
# ==========================================

