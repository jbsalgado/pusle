# ==========================================
# CONFIGURAÇÃO DO APACHE PARA LOCALHOST - ARCH LINUX
# ==========================================
# 
# Este arquivo contém a configuração do VirtualHost para desenvolvimento local.
# Configurado especificamente para Arch Linux.
# 
# INSTRUÇÕES DE INSTALAÇÃO NO ARCH LINUX:
# 
# 1. Instale o Apache (se ainda não estiver instalado):
#    sudo pacman -S apache
#
# 2. Copie este conteúdo para: /etc/httpd/conf/extra/httpd-vhosts.conf
#    ou crie um novo arquivo: /etc/httpd/conf.d/pulse-localhost.conf
#
# 3. Edite /etc/httpd/conf/httpd.conf e certifique-se de que estas linhas estão descomentadas:
#    LoadModule rewrite_module modules/mod_rewrite.so
#    LoadModule headers_module modules/mod_headers.so
#    Include conf/extra/httpd-vhosts.conf
#    (ou Include conf.d/*.conf se usar conf.d)
#
# 4. Teste a configuração:
#    sudo apachectl configtest
#
# 5. Reinicie o Apache:
#    sudo systemctl restart httpd
#
# 6. Habilite o Apache para iniciar no boot (opcional):
#    sudo systemctl enable httpd
#
# 7. Adicione ao /etc/hosts:
#    echo "127.0.0.1 pulse.localhost" | sudo tee -a /etc/hosts
#
# 8. Verifique os logs em caso de erro:
#    sudo tail -f /var/log/httpd/error_log
#    sudo tail -f /var/log/httpd/pulse-localhost-error.log
#
# ==========================================

<VirtualHost *:80>
    ServerName pulse.localhost
    ServerAlias localhost
    
    # AJUSTE ESTE CAMINHO: Caminho completo até a pasta web do projeto
    # Exemplo no Manjaro: /srv/http/pulse/web
    DocumentRoot "/srv/http/pulse/web"
    
    # Configuração do diretório web
    <Directory "/srv/http/pulse/web">
        # Permite listagem de diretórios (útil para desenvolvimento)
        Options Indexes FollowSymLinks
        
        # CRÍTICO: Permite que o .htaccess seja processado
        AllowOverride All
        
        # Permite acesso a todos
        Require all granted
        
        # Habilita o motor de reescrita
        RewriteEngine on
        
        # Regras de reescrita (backup caso o .htaccess não funcione)
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . index.php [L]
    </Directory>
    
    # Configuração de logs
    ErrorLog /var/log/httpd/pulse-localhost-error.log
    CustomLog /var/log/httpd/pulse-localhost-access.log combined
    
    # LogLevel debug (útil para desenvolvimento, remova em produção)
    LogLevel warn
</VirtualHost>

# ==========================================
# ALTERNATIVA: Configuração sem VirtualHost
# ==========================================
# 
# Se preferir não usar VirtualHost, ajuste o DocumentRoot padrão:
# 
# No arquivo /etc/httpd/conf/httpd.conf (ou /etc/apache2/apache2.conf):
# 
# DocumentRoot "/srv/http/pulse/web"
# 
# <Directory "/srv/http/pulse/web">
#     Options Indexes FollowSymLinks
#     AllowOverride All
#     Require all granted
#     RewriteEngine on
#     RewriteCond %{REQUEST_FILENAME} !-f
#     RewriteCond %{REQUEST_FILENAME} !-d
#     RewriteRule . index.php [L]
# </Directory>
#
# ==========================================

